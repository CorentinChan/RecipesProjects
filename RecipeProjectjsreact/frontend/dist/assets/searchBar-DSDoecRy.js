import{r as i,u as N,c as y,j as e,a as x,b as C}from"./index-BZBRw6kG.js";function w({title:o,img:n,id:a,nbItems:l,note:c,author:h,isFavoris:p}){const[m,t]=i.useState(p);let s="/recipe?id="+a,r=N();const d=y(u=>u.user);n=n+"/preview";async function b(){let u=a;try{const{data:f}=await x.post("https://corentinchan.de/addList",{recipeID:u},{headers:{"Content-Type":"application/json"},withCredentials:!0});f.message==="List Added"&&t(!0)}catch(f){console.error("error axios :",f)}}async function j(){let u="favoris",f=a;try{const{data:g}=await x.post("https://corentinchan.de/deleteRecipeList",{recipeID:f,type:u},{headers:{"Content-Type":"application/json"},withCredentials:!0});g.check&&t(!1)}catch(g){console.error("Erreur lors de la connexion :",g)}}async function v(u){u.stopPropagation(),console.log(m),m?j():b()}return e.jsx("div",{className:`col-6 px-1 my-lg-3 col-lg-4 ${l>2?"col-lg-4":"col-lg-6"}  `,"data-testid":`card-${a}`,onClick:()=>{r(s),window.scrollTo({top:0,behavior:"smooth"})},children:e.jsxs("div",{className:"card shadow-sm h-100  border-0 rounded-4  ",children:[e.jsxs("div",{className:"imagePart rounded-4 ",children:[e.jsx("img",{loading:"lazy",width:"400",height:"240",decoding:"async",src:n||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwAdnj607fkyztZ3TkKVTdEy-FG-tD-gEGJQ&s",className:"card-img-top border-0 rounded-4 w-100",alt:"Card"}),d&&e.jsx("span",{className:"heart-icon",children:e.jsx("i",{className:`${m?"fa-solid":"fa-regular"} fa-heart fs-1`,onClick:v})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title fw-bold",children:[" ",o," "]}),e.jsxs("div",{className:"d-flex pt-2 justify-content-between",children:[e.jsxs("span",{className:"noteCard",children:[c,e.jsx("i",{className:"pb-1  ms-1 fa-solid fa-star"})]}),e.jsx("span",{className:"card-text fst-italic text-break",children:h})]})]})]},a)},a)}i.createContext();function E({keyword:o,filter:n}){const a=[];let l=[];C();const[c,h]=i.useState([]),[p,m]=i.useState(!0);return i.useEffect(()=>{async function t(){let s=o,r=n;console.log(s+" "+r);try{const{data:d}=await x.post("https://corentinchan.de/searchRecipeHome",{textSearch:s,searchFilter:r},{headers:{"Content-Type":"application/json"},withCredentials:!0});h(d.recipes||[]),console.log("Réponse backend :",d)}catch(d){console.error("error axios :",d)}}t()},[o,n]),c.forEach((t,s)=>{s>0&&s%12===0&&(a.push(l),l=[]),l.push(t)}),a.push(l),!c||c.length===0?null:e.jsxs("div",{id:"cardCarousel",className:"carousel slide",children:[e.jsx("div",{className:"carousel-inner p-2 p-lg-4",children:a.map((t,s)=>e.jsx("div",{className:` ms-lg-5  carousel-item ${s===0?"active":""}`,children:e.jsx("div",{className:"row g-3  ",children:t.map((r,d)=>e.jsx(w,{title:r.title,nbItems:t.length,img:r.image?r.image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwAdnj607fkyztZ3TkKVTdEy-FG-tD-gEGJQ&s",id:r.id,note:r.note,author:r.auteur,isFavoris:!!r.userID},d))})},s))}),e.jsxs("div",{className:"carousel-indicators p-2 w-75 position-static mt-3 ",children:[e.jsx("button",{className:"btn btn-outline-primary bg-white ",type:"button","data-bs-target":"#cardCarousel","data-bs-slide":"prev",children:"⬅️"}),e.jsx("div",{className:"d-flex flex-row flex-nowrap overflow-x-auto",children:a.map((t,s)=>e.jsx("button",{type:"button","data-bs-target":"#cardCarousel","data-bs-slide-to":s,className:`btn   bg-transparent   ${s===0?"active ":""} `,children:s+1},s))}),e.jsx("button",{className:"btn btn-outline-primary bg-white",type:"button","data-bs-target":"#cardCarousel","data-bs-slide":"next",children:"➡️"})]})]},`${o}-${n}-${c.length}`)}function T({keyword:o,setKeyword:n,filter:a,setFilter:l}){const[c,h]=i.useState(o),p=i.useRef(!1);function m(){p.current=!0,n(c)}return i.useEffect(()=>{const t=setTimeout(()=>{p.current||(n(c),p.current=!1)},100);return()=>clearTimeout(t)},[c]),i.useEffect(()=>{h(o)},[o]),e.jsxs("section",{className:"d-lg-flex recipeForm my-3 mx-lg-5 ",children:[e.jsx("div",{className:"container mt-2  justify-content-between ",children:e.jsx("div",{className:"d-lg-flex ms-lg-3",role:"search",children:e.jsxs("div",{className:"input-group w-lg-50 slide-in-blurred-left rounded-5 border searchbar-group ",children:[e.jsx("span",{className:"input-group-text btnSearch border-0 bg-transparent",id:"basic-addon1 ",onClick:m,children:e.jsx("i",{className:"fa-solid fa-magnifying-glass "})}),e.jsx("input",{type:"text",className:"form-control form-control-lg searchbar border-0 bg-transparent ",placeholder:"Search a recipe",id:"textSearch","aria-label":"Search","aria-describedby":"basic-addon1",onChange:t=>h(t.target.value),value:c})]})})}),e.jsx("div",{className:"searchList mt-2",children:e.jsxs("select",{className:"form-select fs-5 rounded-pill form-select-lg mx-2 me-lg-5 search-select ",defaultValue:"",id:"recipeFilter",onChange:t=>l(t.target.value),children:[e.jsxs("option",{value:"",disabled:!0,children:["Sort by :"," "]}),e.jsx("option",{value:"date",children:"Sort by : date"}),e.jsx("option",{value:"recipeAlpha",children:"Sort by : A to Z"}),e.jsx("option",{value:"note",children:"Sort by : note "})]})})]})}export{E as C,T as S};
