import{r as n,j as e,a as x,u as g,c as h,S as j}from"./index-DuV2uuI4.js";function f({}){const[l,o]=n.useState(!1),[r,d]=n.useState(""),c=n.useRef();async function m(){try{const{data:a}=await x.post("https://corentinchan.de/getPasswordMail",{mail:r},{headers:{"Content-Type":"application/json"},withCredentials:!0});if(console.log("Réponse backend :",a),a.check){o(a.check);const i=document.getElementById("exampleModal");bootstrap.Modal.getInstance(i).hide()}}catch(a){console.error("Erreur lors de la connexion :",a)}}return e.jsxs("div",{children:[l?e.jsx("p",{class:"text-warning",children:"A new password have been sent, check your mail!"}):e.jsx("button",{type:"button",class:"btn bg-light border","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:e.jsx("a",{children:"Forget your password?"})}),e.jsx("div",{className:"modal fade mt-5",id:"exampleModal",ref:c,tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:"Get your password"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body justify-content-center",children:[e.jsx("p",{children:"You can receive your password by mail"}),e.jsx("input",{type:"email",name:"mail",placeholder:"type your e-mail",required:!0,className:"form-control text-center w-100 rounded-3 border border-grey",value:r,onChange:a=>d(a.target.value)})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,children:"Send Mail"})]})]})})})]})}function N(){const[l,o]=n.useState(!1),[r,d]=n.useState(""),[c,m]=n.useState(""),[a,i]=n.useState(""),u=g();h(s=>s.user);const p=h(s=>s.setUser);h(s=>s.setUserRole);async function b(s){s.preventDefault();try{const{data:t}=await x.post("https://corentinchan.de/signin",{mail:r,password:c},{headers:{"Content-Type":"application/json"},withCredentials:!0});i(t.message),console.log("Réponse backend :",t),t.succeed&&(p(t.pseudo),u("/"))}catch(t){console.error("Erreur lors de la connexion :",t),i(t.response?.data?.message||"Erreur réseau")}}return e.jsxs("div",{className:"d-lg-flex contactGroup",children:[e.jsx("div",{className:"contactForm-container p-lg-5",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"p-4 bg-white",children:e.jsxs("form",{className:"contactForm",onSubmit:b,children:[e.jsxs("div",{className:"w-100 w-lg-75 mx-auto text-center text-grey",children:[e.jsx("h2",{className:"text-center m-4 text-black fw-bold pt-5",children:"Sign in"}),e.jsxs("div",{className:"logosLogin text-center d-flex justify-content-center",children:[e.jsx("a",{href:"https://corentinchan.de/auth/google",children:e.jsx("i",{className:"fa-brands fa-google fa-2x p-3"})}),e.jsx("i",{className:"fa-brands fa-facebook fa-2x p-3"}),e.jsx("i",{className:"fa-brands fa-instagram fa-2x p-3"})]}),e.jsx("h5",{className:"text-center m-4 text-grey",children:"Or use your email account :"}),e.jsx("label",{htmlFor:"mail",className:"form-label text-center text-grey fs-4 me-3",children:"Email"}),e.jsx("input",{type:"email",className:"form-control rounded-pill bg-white border border-grey text-center",autocomplete:"email",id:"mail",value:r,onChange:s=>d(s.target.value)}),e.jsx("label",{htmlFor:"password",className:"form-label fs-4 me-3 mt-3",children:"Password"}),e.jsx("input",{type:"password",className:"form-control rounded-pill bg-white border border-grey text-center",id:"password",value:c,autocomplete:"current-password",onChange:s=>m(s.target.value),placeholder:"Min 4 characters"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"btn mx-3 fs-5 px-3 mt-4 btn-warning rounded-pill",children:"Sign in"})})]})}),e.jsx("p",{className:"text-center",children:a}),e.jsx("div",{className:"text-center my-3",children:e.jsx(f,{})})]})}),!l&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"signupSection py-3",children:e.jsx("div",{className:"container py-5",children:e.jsx("div",{className:"p-4 border rounded-4 shadow-sm text-white text-center background-perso",children:e.jsxs("div",{className:"addMargin",children:[e.jsx("h2",{className:"m-3 p-3 fw-bold",children:"Hello there, join us"}),e.jsx("h5",{className:"m-3 p-3",children:"Enter your personal details, and join the cooking community"}),e.jsx("button",{type:"button",onClick:()=>o(!0),className:"btn fs-5 p-3 m-3 bg-white rounded-pill",children:"Sign Up"})]})})})})}),l&&e.jsxs(e.Fragment,{children:[" ",e.jsx(j,{setShowSignup:o})]})]})}export{N as default};
